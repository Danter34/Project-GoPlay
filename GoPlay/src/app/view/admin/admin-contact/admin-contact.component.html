<div class="dashboard-container">
  <div class="action-header">
     <h5 class="m-0 font-weight-bold text-primary">Quản lý Hỏi Đáp</h5>
    
    <div class="filter-box">
      <select [(ngModel)]="filterStatus" (change)="onFilterChange()" class="form-select">
        <option value="All">Tất cả trạng thái</option>
        <option value="New">Chưa xử lý (Mới)</option>
        <option value="Replied">Đã trả lời</option>
      </select>
    </div>
  </div>

  <div class="table-responsive">
    <table class="table custom-table">
      <thead>
        <tr>
          <th>ID</th>
          <th>Người gửi</th>
          <th>Email liên hệ</th>
          <th style="width: 30%">Nội dung</th>
          <th>Ngày gửi</th>
          <th>Trạng thái</th>
          <th>Hành động</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let item of contacts">
          <td><span style="color: #aaa; font-weight: bold;">#{{ item.id }}</span></td>
          <td>
             <div class="fw-bold" style="color: #2c3e50; font-size: 1rem;">{{ item.name }}</div>
          </td>
          <td style="color: #1976D2;">{{ item.email }}</td>
          <td>
            <div class="text-truncate" style="max-width: 250px; color: #555;">
               {{ item.message }}
            </div>
          </td>
          <td style="font-weight: 500;">{{ item.createdAt | date:'dd/MM/yyyy HH:mm' }}</td>
          <td>
            <span class="badge" 
                  [ngClass]="{
                    'bg-new': item.status === 'New',
                    'bg-replied': item.status === 'Replied'
                  }">
              {{ item.status === 'New' ? 'Mới' : 'Đã xong' }}
            </span>
          </td>
          <td>
            <button class="btn-icon view" (click)="viewMessage(item)" title="Xem chi tiết">
              <i class="fas fa-eye"></i>
            </button>
            <button class="btn-icon delete" (click)="deleteItem(item.id)" title="Xóa">
              <i class="fas fa-trash-alt"></i>
            </button>
          </td>
        </tr>
        <tr *ngIf="contacts.length === 0 && !isLoading">
          <td colspan="7" class="text-center py-5" style="color: #999;">Không có tin nhắn nào.</td>
        </tr>
      </tbody>
    </table>
  </div>
</div>