<header class="hero">
  <div class="container hero-content">
      <h1>Cháy Hết Mình Với Đam Mê</h1>
      <p>Tìm và đặt sân thể thao nhanh chóng tại khu vực của bạn</p>
  </div>
</header>

<main class="container">
  
  <div class="filter-bar">
      <div class="location-filters">
          <div class="select-wrapper">
              <select class="custom-select" [(ngModel)]="selectedCityCode" (change)="onCityChange()">
                  <option value="">Toàn quốc</option>
                  <option *ngFor="let city of cities" [value]="city.Id">{{ city.Name }}</option>
              </select>
              <i class="fas fa-map-marker-alt select-icon"></i>
          </div>

          <div class="select-wrapper">
              <select class="custom-select" [(ngModel)]="searchDistrict" (change)="onDistrictChange()" [disabled]="!selectedCityCode">
                  <option value="">Tất cả Quận/Huyện</option>
                  <option *ngFor="let dist of districts" [value]="dist.Name">{{ dist.Name }}</option>
              </select>
              <i class="fas fa-location-arrow select-icon"></i>
          </div>
      </div>

      <div class="divider"></div>

      <div class="categories-scroll">
          <div class="cat-item" [class.active]="searchSportId === 0" (click)="searchSportId = 0; onSearch()"><i class="fas fa-th-large"></i> Tất cả</div>
          <div class="cat-item" [class.active]="searchSportId === 1" (click)="searchSportId = 1; onSearch()"><i class="far fa-futbol"></i> Bóng đá</div>
          <div class="cat-item" [class.active]="searchSportId === 2" (click)="searchSportId = 2; onSearch()"><i class="fas fa-table-tennis"></i> Cầu lông</div>
          <div class="cat-item" [class.active]="searchSportId === 3" (click)="searchSportId = 3; onSearch()"><i class="fa-solid fa-baseball"></i> Tennis</div>
          <div class="cat-item" [class.active]="searchSportId === 4" (click)="searchSportId = 4; onSearch()"><i class="fa-solid fa-basketball"></i> Bóng rổ</div>
          <div class="cat-item" [class.active]="searchSportId === 5" (click)="searchSportId = 5; onSearch()"><i class="fa-solid fa-volleyball"></i> Bóng chuyền</div>
          <div class="cat-item" [class.active]="searchSportId === 6" (click)="searchSportId = 6; onSearch()"><i class="fa-solid fa-golf-ball-tee"></i> Pickleball</div>
      </div>
  </div>

  <h2 class="section-title">Danh Sách Sân Bãi</h2>
  
  <div class="fields-grid">
      <div class="field-card" *ngFor="let field of fields" [routerLink]="['/field', field.fieldId]">
          <div class="card-img-wrapper">
              <div class="rating-badge"><i class="fas fa-star"></i> {{ field.averageRating }}</div>
              <img [src]="field.images.length > 0 ? field.images[0].imageUrl : 'assets/placeholder.jpg'" 
                   [alt]="field.fieldName" class="card-img">
          </div>
          <div class="card-body">
              <h3 class="card-title">{{ field.fieldName }}</h3>
              <div class="card-meta"><i class="fas fa-map-marker-alt"></i> {{ field.district }}, {{ field.city }}</div>
              <div class="card-meta"><i class="fas fa-users"></i> {{ field.sportName }}</div>
              <div class="card-footer">
                  <div class="price">{{ field.price | number }}đ <span>/giờ</span></div>
                  
                  <button class="btn-book"
                      *ngIf="currentUserId !== field.ownerId"
                      (click)="$event.stopPropagation(); openBookingModal(field)">
                      Đặt Ngay
                  </button>
              </div>
          </div>
      </div>
  </div>

  <div class="pagination-container" *ngIf="totalPages > 1">
      <button class="btn-page" (click)="changePage(currentPage - 1)" [disabled]="currentPage === 1">
          <i class="fas fa-chevron-left"></i>
      </button>

      <button *ngFor="let page of pageNumbers" 
              class="btn-page" 
              [class.active]="page === currentPage"
              (click)="changePage(page)">
          {{ page }}
      </button>

      <button class="btn-page" (click)="changePage(currentPage + 1)" [disabled]="currentPage === totalPages">
          <i class="fas fa-chevron-right"></i>
      </button>
  </div>

</main>

<app-booking-modal 
  *ngIf="showBookingModal" 
  [field]="selectedField" 
  (close)="closeModal()">
</app-booking-modal>